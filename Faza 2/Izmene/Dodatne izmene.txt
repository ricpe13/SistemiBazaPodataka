CREATE TABLE OBJEKAT (
IDPARKA NUMBER (4,0) NOT NULL,
REDNIBR NUMBER (4,0) NOT NULL,
CONSTRAINT PK_OBJEKAT PRIMARY KEY (IDPARKA, REDNIBR),
CONSTRAINT OP FOREIGN KEY (IDPARKA) REFERENCES PARK(IDZ)
);

DROP TABLE KLUPA;

CREATE TABLE KLUPA (
IDPARKA NUMBER (4,0) NOT NULL,
REDNIBR NUMBER (4,0) NOT NULL,
MATERIJAL VARCHAR2 (15) NOT NULL,
CONSTRAINT KO FOREIGN KEY (IDPARKA, REDNIBR) REFERENCES OBJEKAT (IDPARKA,REDNIBR) ON DELETE CASCADE
);

DROP TABLE DECIJE_IGRALISTE;

CREATE TABLE DECIJE_IGRALISTE (
IDPARKA NUMBER (4,0) NOT NULL,
REDNIBR NUMBER (4,0) NOT NULL,
BRIGRACAKA NUMBER (2,0) NOT NULL,
PESAK NUMBER(1,0) NOT NULL,
STAROST NUMBER(2,0) NOT NULL,
CONSTRAINT DIO FOREIGN KEY (IDPARKA, REDNIBR) REFERENCES OBJEKAT (IDPARKA,REDNIBR) ON DELETE CASCADE
);

DROP TABLE SVETILJKA;

CREATE TABLE SVETILJKA (
IDPARKA NUMBER (4,0) NOT NULL,
REDNIBR NUMBER (4,0) NOT NULL,
BRSIJALICA NUMBER (4,0) NOT NULL,
CONSTRAINT SO FOREIGN KEY (IDPARKA, REDNIBR) REFERENCES OBJEKAT (IDPARKA,REDNIBR) ON DELETE CASCADE
);

DROP TABLE FONTANA;

CREATE TABLE FONTANA (
IDPARKA NUMBER (4,0) NOT NULL,
REDNIBR NUMBER (4,0) NOT NULL,
BRPRSKALICA NUMBER (4,0) NOT NULL,
POVRSINAF NUMBER (4,0) NOT NULL,
CONSTRAINT FO FOREIGN KEY (IDPARKA, REDNIBR) REFERENCES OBJEKAT (IDPARKA,REDNIBR) ON DELETE CASCADE
);

DROP TABLE DRVO;

CREATE TABLE DRVO (
IDPARKA NUMBER (4,0) NOT NULL,
REDNIBR NUMBER (4,0) NOT NULL,
VISINAKROSNJE NUMBER (4,2) NOT NULL,
VRSTA VARCHAR2(20) NOT NULL,
DATUMSADNJE DATE NOT NULL,
POVRSINAK NUMBER(5,2) NOT NULL,
OBIMDEBLA NUMBER(5,2) NOT NULL,
IDZASTITE NUMBER (4,0) NOT NULL,
CONSTRAINT DO FOREIGN KEY (IDPARKA, REDNIBR) REFERENCES OBJEKAT (IDPARKA,REDNIBR) ON DELETE CASCADE,
CONSTRAINT DG FOREIGN KEY (IDZASTITE) REFERENCES ZASTITA(IDZASTITE)
);

DROP TABLE SKULPTURA;

DROP TABLE SPOMENIK;

DROP TABLE ZASTICENI_OBJEKAT;

CREATE TABLE ZASTICENI_OBJEKAT (
IDPARKA NUMBER (4,0) NOT NULL,
REDNIBR NUMBER (4,0) NOT NULL,
TIPZO VARCHAR2 (10) CHECK (TIP IN ('spomenik', 'skulptura')) NOT NULL,
IDZASTITE NUMBER (4,0) NOT NULL,
NAZIVSPOM VARCHAR2(30),
AUTORSKUL VARCHAR2(50),
CONSTRAINT ZOO FOREIGN KEY (IDPARKA, REDNIBR) REFERENCES OBJEKAT (IDPARKA,REDNIBR) ON DELETE CASCADE,
CONSTRAINT ZOZ FOREIGN KEY (IDZASTITE) REFERENCES ZASTITA (IDZASTITE) ON DELETE CASCADE,
CONSTRAINT CHK_NAZIV CHECK (TIP != 'spomenik' OR (NAZIVSPOM IS NOT NULL)),
CONSTRAINT CHK_AUTOR CHECK (TIP != 'skulptura' OR (AUTORSKUL IS NOT NULL))
);